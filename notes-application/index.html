<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile Card UI</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="new-call-container">
      <form id="new-call-form">
        <h2 id="form-title">New Call</h2>

        <!-- Image URL -->
        <div class="form-group">
          <label for="image-url" class="form-label">Image URL</label>
          <input
            required
            type="url"
            id="image-url"
            class="form-input"
            placeholder="https://example.com/photo.jpg"
          />
        </div>

        <!-- Full Name -->
        <div class="form-group">
          <label for="full-name" class="form-label">Full Name</label>
          <input
            required
            type="text"
            id="full-name"
            class="form-input"
            placeholder="Enter full name"
          />
        </div>

        <!-- Home Town -->
        <div class="form-group">
          <label for="home-town" class="form-label">Home Town</label>
          <input
            required
            type="text"
            id="home-town"
            class="form-input"
            placeholder="Enter home town"
          />
        </div>

        <!-- Purpose -->
        <div class="form-group">
          <label for="purpose" class="form-label">Purpose</label>
          <input
            required
            type="text"
            id="purpose"
            class="form-input"
            placeholder="e.g. Quick appointment note"
          />
        </div>

        <!-- Category -->
        <div class="form-group">
          <label class="form-label">Category</label>

          <div id="category-options">
            <label class="category-pill pill-emergency">
              <input required type="radio" name="category" />
              Emergency
            </label>

            <label class="category-pill pill-important">
              <input required type="radio" name="category" />
              Important
            </label>

            <label class="category-pill pill-urgent">
              <input required type="radio" name="category" />
              Urgent
            </label>

            <label class="category-pill pill-normal">
              <input required type="radio" name="category" />
              No Rush
            </label>
          </div>
        </div>

        <!-- Actions -->
        <button id="btn-create-note" type="submit">Create Note</button>

        <button id="btn-close" type="button">Close</button>
      </form>
    </div>

    <div class="card">
      <!-- Left Controls -->
      <div class="card-controls">
        <button class="card-control-btn add-card-btn">+</button>
        <button class="card-control-btn top-card-btn">↑</button>
        <button class="card-control-btn bottom-card-btn">↓</button>
      </div>

      <!-- Color Dots -->
      <div class="color-dots">
        <span class="black"></span>
        <span class="purple"></span>
        <span class="orange"></span>
        <span class="teal"></span>
      </div>

      <!-- Profile Content -->
      <img
        src="https://randomuser.me/api/portraits/women/44.jpg"
        alt="Profile"
        class="profile-img"
      />
      <div class="name">Fatima Uma</div>
      <div class="details">
        <div>Home town</div>
        <div>Singapore</div>
      </div>
      <div class="details">
        <div>Bookings</div>
        <div>3 times</div>
      </div>

      <!-- Buttons -->
      <div class="buttons">
        <button class="call-btn">Call</button>
        <button class="msg-btn">Message</button>
      </div>
    </div>

    <script>
      // All Variables and Doc Selection

      let addNote = document.querySelector(".add-card-btn");
      let closeForm = document.querySelector("#btn-close");

      let formContainer = document.querySelector("#new-call-container");
      // Form
      const newCallForm = document.querySelector("#new-call-form");

      // Heading
      const formTitle = document.querySelector("#form-title");

      // Inputs
      const imageUrlInput = document.querySelector("#image-url");
      const fullNameInput = document.querySelector("#full-name");
      const homeTownInput = document.querySelector("#home-town");
      const purposeInput = document.querySelector("#purpose");

      // Category (radio buttons)
      const categoryInputs = document.querySelectorAll(
        'input[name="category"]'
      );

      // Buttons
      const createNoteBtn = document.querySelector("#btn-create-note");

      // CODE STARTS HERE

      addNote.addEventListener("click", function () {
        formContainer.style.display = "block";
        // closeForm.style.display = 'none';
        console.log("Clicked");
      });

      createNoteBtn.addEventListener("submit", function (e) {
        e.preventDefault();
      });

      closeForm.addEventListener("click", function () {
        formContainer.style.display = "none";
      });

      newCallForm.addEventListener("submit", function (evnt) {
        evnt.preventDefault();

        let isValid = true;
        // ===============================
        // Image URL Validation
        // ===============================
        if (imageUrlInput.value.trim() === "") {
          showError(imageUrlInput, "Image URL is required");
          isValid = false;
        } else if (!isValidURL(imageUrlInput.value.trim())) {
          showError(imageUrlInput, "Enter a valid image URL");
          isValid = false;
        }

        // ===============================
        // Full Name Validation
        // ===============================
        if (fullNameInput.value.trim() === "") {
          showError(fullNameInput, "Full name is required");
          isValid = false;
        } else if (fullNameInput.value.trim().length < 3) {
          showError(fullNameInput, "Name must be at least 3 characters");
          isValid = false;
        }

        // ===============================
        // Home Town Validation
        // ===============================
        if (homeTownInput.value.trim() === "") {
          showError(homeTownInput, "Home town is required");
          isValid = false;
        }

        // ===============================
        // Purpose Validation
        // ===============================
        if (purposeInput.value.trim() === "") {
          showError(purposeInput, "Purpose is required");
          isValid = false;
        }

        // ===============================
        // Category (Radio Button) Validation
        // ===============================
        let categorySelected = false;

        categoryInputs.forEach((radio) => {
          if (radio.checked) categorySelected = true;
        });

        if (!categorySelected) {
          showError(categoryInputs[0], "Please select a category");
          isValid = false;
        }

        // ===============================
        // If All Valid
        // ===============================
        if (isValid) {
          console.log("Form Submitted Successfully ✅");

          // Optional: Reset form
          newCallForm.reset();
          formContainer.style.display = "none";
        }
      });

      // ===============================
      // HELPER FUNCTIONS
      // ===============================
      function showError(input, message) {
        const error = document.createElement("small");
        error.className = "error-text";
        error.style.color = "red";
        error.style.display = "block";
        error.innerText = message;

        input.parentElement.appendChild(error);
      }

      function isValidURL(url) {
        try {
          new URL(url);
          return true;
        } catch {
          return false;
        }
      }
    </script>
  </body>
</html>
